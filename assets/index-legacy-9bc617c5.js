System.register(["./index-legacy-b223331c.js"],(function(a,e){"use strict";var o,r,n,i,l,t,c,d,v,s,g,u,m,h,f,p,b,y,z,_,x,k=document.createElement("style");return k.textContent=":root{--van-image-placeholder-text-color: var(--van-text-color-2);--van-image-placeholder-font-size: var(--van-font-size-md);--van-image-placeholder-background: var(--van-background);--van-image-loading-icon-size: .85333rem;--van-image-loading-icon-color: var(--van-gray-4);--van-image-error-icon-size: .85333rem;--van-image-error-icon-color: var(--van-gray-4)}.van-image{position:relative;display:inline-block}.van-image--round{overflow:hidden;border-radius:var(--van-radius-max)}.van-image--round .van-image__img{border-radius:inherit}.van-image--block{display:block}.van-image__img,.van-image__error,.van-image__loading{display:block;width:100%;height:100%}.van-image__error,.van-image__loading{position:absolute;top:0;left:0;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--van-image-placeholder-text-color);font-size:var(--van-image-placeholder-font-size);background:var(--van-image-placeholder-background)}.van-image__loading-icon{color:var(--van-image-loading-icon-color);font-size:var(--van-image-loading-icon-size)}.van-image__error-icon{color:var(--van-image-error-icon-color);font-size:var(--van-image-error-icon-size)}\n",document.head.appendChild(k),{setters:[a=>{o=a.h,r=a.ag,n=a.t,i=a.j,l=a.d,t=a.z,c=a.aP,d=a.c,v=a.ax,s=a.ak,g=a.w,u=a.a7,m=a.a9,h=a.o,f=a.s,p=a.l,b=a.aF,y=a.aQ,z=a.n,_=a.I,x=a.v}],execute:function(){const[e,k]=o("image"),w={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:r,height:r,radius:r,lazyLoad:Boolean,iconSize:r,showError:n,errorIcon:i("photo-fail"),iconPrefix:String,showLoading:n,loadingIcon:i("photo")};var S=l({name:e,props:w,emits:["load","error"],setup(a,{emit:e,slots:o}){const r=t(!1),n=t(!0),i=t(),{$Lazyload:l}=c().proxy,x=d((()=>{const e={width:v(a.width),height:v(a.height)};return s(a.radius)&&(e.overflow="hidden",e.borderRadius=v(a.radius)),e}));g((()=>a.src),(()=>{r.value=!1,n.value=!0}));const w=a=>{n.value&&(n.value=!1,e("load",a))},S=()=>{const a=new Event("load");Object.defineProperty(a,"target",{value:i.value,enumerable:!0}),w(a)},j=a=>{r.value=!0,n.value=!1,e("error",a)},I=(e,o,r)=>r?r():p(_,{name:e,size:a.iconSize,class:o,classPrefix:a.iconPrefix},null),L=()=>{if(r.value||!a.src)return;const e={alt:a.alt,class:k("img"),style:{objectFit:a.fit,objectPosition:a.position}};return a.lazyLoad?b(p("img",z({ref:i},e),null),[[y("lazy"),a.src]]):p("img",z({ref:i,src:a.src,onLoad:w,onError:j},e),null)},P=({el:a})=>{const e=()=>{a===i.value&&n.value&&S()};i.value?e():f(e)},E=({el:a})=>{a!==i.value||r.value||j()};return l&&u&&(l.$on("loaded",P),l.$on("error",E),m((()=>{l.$off("loaded",P),l.$off("error",E)}))),h((()=>{f((()=>{var a;(null==(a=i.value)?void 0:a.complete)&&S()}))})),()=>{var e;return p("div",{class:k({round:a.round,block:a.block}),style:x.value},[L(),n.value&&a.showLoading?p("div",{class:k("loading")},[I(a.loadingIcon,k("loading-icon"),o.loading)]):r.value&&a.showError?p("div",{class:k("error")},[I(a.errorIcon,k("error-icon"),o.error)]):void 0,null==(e=o.default)?void 0:e.call(o)])}}});a("I",x(S))}}}));
